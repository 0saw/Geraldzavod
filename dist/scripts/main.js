(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({"C:\\Users\\iamle\\Documents\\Work\\_inprogress\\geralzavod.ru\\Geraldzavod\\src\\scripts\\main.js":[function(require,module,exports){
require('./views/view');
require('./views/forms');
require('./views/ripple');

$(function () {
  $('.button').ripple();

  sliders();
  forms();

  $('a:not(.benefits__item, .gallery-item) img').parent().addClass('img');

  $('.gallery').each(function () {
    $(this).magnificPopup({
      delegate: 'a',
      type: 'image',
      gallery:{
        enabled:true
      },
      removalDelay: 500,
      mainClass: 'mfp-zoom-in modal',
      callbacks: {
        beforeOpen: function() {}
      },
      midClick: true
    });
  });
});

var sliders = function() {
  $('.front-slick').slick({
    arrows: true,
    centerMode: true,
    centerPadding: '60px',
    slidesToShow: 5,
    nextArrow: '<div class="slick-next"></div>',
    prevArrow: '<div class="slick-prev"></div>',
    responsive: [{
        breakpoint: 960,
        settings: {
          arrows: true,
          centerMode: true,
          centerPadding: '50px',
          slidesToShow: 3,
          swipeToSlide: true
        }
      },
      {
        breakpoint: 480,
        settings: {
          arrows: false,
          centerMode: true,
          centerPadding: '50px',
          slidesToShow: 1,
          swipeToSlide: true
        }
      }]
  });
};

var forms = function() {
  $('.form a.button, .footer a.button, .product .button').ripple();
  return $('a[href="#callForm"]').on('click', function(e) {
    e.preventDefault();
    return document.openForm('.form.modal form:eq(0)');
  });
};

document.formsResponse = function(message) {
  if (message == null) {
    message = "Ваша заявка будет рассмотрена в скором времени!</br>Мы обязательно вам перезвоним";
  }
  return $.magnificPopup.open({
    items: {
      src: $("<div class='form__response'>" + message + "</div>"),
      type: 'inline'
    },
    removalDelay: 500,
    mainClass: 'mfp-3d-unfold',
    callbacks: {
      beforeOpen: function() {}
    },
    midClick: true
  });
};

document.openForm = function(selector) {
  if (selector == null) {
    selector = ".form form:eq(1)";
  }
  return $.magnificPopup.open({
    items: {
      src: $(selector),
      type: 'inline'
    },
    removalDelay: 500,
    mainClass: 'mfp-zoom-in modal',
    callbacks: {
      beforeOpen: function() {}
    },
    midClick: true
  });
};

},{"./views/forms":"C:\\Users\\iamle\\Documents\\Work\\_inprogress\\geralzavod.ru\\Geraldzavod\\src\\scripts\\views\\forms.js","./views/ripple":"C:\\Users\\iamle\\Documents\\Work\\_inprogress\\geralzavod.ru\\Geraldzavod\\src\\scripts\\views\\ripple.js","./views/view":"C:\\Users\\iamle\\Documents\\Work\\_inprogress\\geralzavod.ru\\Geraldzavod\\src\\scripts\\views\\view.js"}],"C:\\Users\\iamle\\Documents\\Work\\_inprogress\\geralzavod.ru\\Geraldzavod\\src\\scripts\\views\\forms.js":[function(require,module,exports){
$(function() {
  var counter, selectors;
  selectors = ['.form__field input[type="text"]', '.form__field input[type="tel"]', '.form__field textarea'];
  $(document).on('ready focus blur', selectors.join(', '), function(e) {
    var $el;
    $el = $(this).parent('span');
    if ($el.length > 0) {
      $el.toggleClass('focused', $(this).is(':focus'));
    }
    return $el.toggleClass('has-text', $(this).val().length > 0);
  });
  $(document).on('click', '.button', function(e) {
    return $(this).siblings('input[type="submit"]').trigger('click');
  });
  counter = 0;
  return $(document).on('click', '.form__right input[type="submit"]', function(e) {
    e.preventDefault();
    $(this).parent().siblings('.wpcf7-response-output').slideUp(400);
    $(this).siblings('.ajax-loader').css({
      visibility: 'visible'
    });
    return window.setTimeout((function(_this) {
      return function() {
        counter++;
        if (counter < 2) {
          $(_this).parents('form').find('.form__field:nth-last-child(n+2) input').addClass('wpcf7-not-valid');
          $(_this).parent().siblings('.wpcf7-response-output').slideDown(400);
        } else {
          $('.wpcf7-not-valid').removeClass('wpcf7-not-valid');
          $(_this).parent().siblings('.wpcf7-good').slideDown(400);
          document.formsResponse();
        }
        return $(_this).siblings('.ajax-loader').css({
          visibility: 'hidden'
        });
      };
    })(this), 700 + Math.random() * (2000 - 700));
  });
});

// ---
// generated by coffee-script 1.9.2

},{}],"C:\\Users\\iamle\\Documents\\Work\\_inprogress\\geralzavod.ru\\Geraldzavod\\src\\scripts\\views\\ripple.js":[function(require,module,exports){
var slice = [].slice;

(function($, window) {
  var Ripple;
  Ripple = (function() {
    function Ripple(el, options) {
      this.$el = $(el);
      this.$el.on('click', (function(_this) {
        return function(e) {
          var x, y;
          e.preventDefault();
          if ($(_this).data('pressed')) {
            return false;
          }
          $(_this).data('pressed', true);
          window.setTimeout(function() {
            return $(_this).data('pressed', false);
          }, 500);
          _this.$ink = _this.$el.children('.ink');
          if (_this.$ink.length === 0) {
            _this.$el.append('<div class="ink"></div>');
          }
          _this.$ink = _this.$el.children('.ink');
          if (_this.$ink.length === 0) {
            return;
          }
          _this.$ink.removeClass("animate");
          if (!_this.$ink.height() && !_this.$ink.width()) {
            _this.d = Math.max(_this.$el.outerWidth(), _this.$el.outerHeight());
            _this.$ink.css({
              height: _this.d,
              width: _this.d
            });
          }
          if (_this.d > 0) {
            x = e.pageX - _this.$el.offset().left - _this.d / 2;
            y = e.pageY - _this.$el.offset().top - _this.d / 2;
            console.log(_this.$ink[0]);
            return _this.$ink.css({
              top: y + 'px',
              left: x + 'px'
            }).addClass("animate");
          }
        };
      })(this));
    }

    return Ripple;

  })();
  return $.fn.extend({
    ripple: function() {
      var args, option;
      option = arguments[0], args = 2 <= arguments.length ? slice.call(arguments, 1) : [];
      return this.each(function() {
        return new Ripple(this);
      });
    }
  });
})(window.jQuery, window);

// ---
// generated by coffee-script 1.9.2

},{}],"C:\\Users\\iamle\\Documents\\Work\\_inprogress\\geralzavod.ru\\Geraldzavod\\src\\scripts\\views\\view.js":[function(require,module,exports){
(function() {
  var sequenceElement = document.getElementById("sequence1");
  if (sequenceElement == null) {
    return;
  }

  var options = {
    animateCanvas: false,
    keyNavigation: true,
    fadeStepWhenSkipped: false,
    reverseWhenNavigatingBackwards: true,
    nextButton: '#sequence1 .seq-prev',
    prevButton: '#sequence1 .seq-next',
    preloader: '#sequence1 .seq-preloader',
    // reverseTimingFunctionWhenNavigatingBackwards: true,
  }

  var mySequence = sequence(sequenceElement, options);
})();

},{}]},{},["C:\\Users\\iamle\\Documents\\Work\\_inprogress\\geralzavod.ru\\Geraldzavod\\src\\scripts\\main.js"])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvc2NyaXB0cy9tYWluLmpzIiwic3JjL3NjcmlwdHMvdmlld3MvZm9ybXMuanMiLCJzcmMvc2NyaXB0cy92aWV3cy9yaXBwbGUuanMiLCJzcmMvc2NyaXB0cy92aWV3cy92aWV3LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2R0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDMUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQy9EQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsInJlcXVpcmUoJy4vdmlld3MvdmlldycpO1xucmVxdWlyZSgnLi92aWV3cy9mb3JtcycpO1xucmVxdWlyZSgnLi92aWV3cy9yaXBwbGUnKTtcblxuJChmdW5jdGlvbiAoKSB7XG4gICQoJy5idXR0b24nKS5yaXBwbGUoKTtcblxuICBzbGlkZXJzKCk7XG4gIGZvcm1zKCk7XG5cbiAgJCgnYTpub3QoLmJlbmVmaXRzX19pdGVtLCAuZ2FsbGVyeS1pdGVtKSBpbWcnKS5wYXJlbnQoKS5hZGRDbGFzcygnaW1nJyk7XG5cbiAgJCgnLmdhbGxlcnknKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAkKHRoaXMpLm1hZ25pZmljUG9wdXAoe1xuICAgICAgZGVsZWdhdGU6ICdhJyxcbiAgICAgIHR5cGU6ICdpbWFnZScsXG4gICAgICBnYWxsZXJ5OntcbiAgICAgICAgZW5hYmxlZDp0cnVlXG4gICAgICB9LFxuICAgICAgcmVtb3ZhbERlbGF5OiA1MDAsXG4gICAgICBtYWluQ2xhc3M6ICdtZnAtem9vbS1pbiBtb2RhbCcsXG4gICAgICBjYWxsYmFja3M6IHtcbiAgICAgICAgYmVmb3JlT3BlbjogZnVuY3Rpb24oKSB7fVxuICAgICAgfSxcbiAgICAgIG1pZENsaWNrOiB0cnVlXG4gICAgfSk7XG4gIH0pO1xufSk7XG5cbnZhciBzbGlkZXJzID0gZnVuY3Rpb24oKSB7XG4gICQoJy5mcm9udC1zbGljaycpLnNsaWNrKHtcbiAgICBhcnJvd3M6IHRydWUsXG4gICAgY2VudGVyTW9kZTogdHJ1ZSxcbiAgICBjZW50ZXJQYWRkaW5nOiAnNjBweCcsXG4gICAgc2xpZGVzVG9TaG93OiA1LFxuICAgIG5leHRBcnJvdzogJzxkaXYgY2xhc3M9XCJzbGljay1uZXh0XCI+PC9kaXY+JyxcbiAgICBwcmV2QXJyb3c6ICc8ZGl2IGNsYXNzPVwic2xpY2stcHJldlwiPjwvZGl2PicsXG4gICAgcmVzcG9uc2l2ZTogW3tcbiAgICAgICAgYnJlYWtwb2ludDogOTYwLFxuICAgICAgICBzZXR0aW5nczoge1xuICAgICAgICAgIGFycm93czogdHJ1ZSxcbiAgICAgICAgICBjZW50ZXJNb2RlOiB0cnVlLFxuICAgICAgICAgIGNlbnRlclBhZGRpbmc6ICc1MHB4JyxcbiAgICAgICAgICBzbGlkZXNUb1Nob3c6IDMsXG4gICAgICAgICAgc3dpcGVUb1NsaWRlOiB0cnVlXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGJyZWFrcG9pbnQ6IDQ4MCxcbiAgICAgICAgc2V0dGluZ3M6IHtcbiAgICAgICAgICBhcnJvd3M6IGZhbHNlLFxuICAgICAgICAgIGNlbnRlck1vZGU6IHRydWUsXG4gICAgICAgICAgY2VudGVyUGFkZGluZzogJzUwcHgnLFxuICAgICAgICAgIHNsaWRlc1RvU2hvdzogMSxcbiAgICAgICAgICBzd2lwZVRvU2xpZGU6IHRydWVcbiAgICAgICAgfVxuICAgICAgfV1cbiAgfSk7XG59O1xuXG52YXIgZm9ybXMgPSBmdW5jdGlvbigpIHtcbiAgJCgnLmZvcm0gYS5idXR0b24sIC5mb290ZXIgYS5idXR0b24sIC5wcm9kdWN0IC5idXR0b24nKS5yaXBwbGUoKTtcbiAgcmV0dXJuICQoJ2FbaHJlZj1cIiNjYWxsRm9ybVwiXScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgcmV0dXJuIGRvY3VtZW50Lm9wZW5Gb3JtKCcuZm9ybS5tb2RhbCBmb3JtOmVxKDApJyk7XG4gIH0pO1xufTtcblxuZG9jdW1lbnQuZm9ybXNSZXNwb25zZSA9IGZ1bmN0aW9uKG1lc3NhZ2UpIHtcbiAgaWYgKG1lc3NhZ2UgPT0gbnVsbCkge1xuICAgIG1lc3NhZ2UgPSBcItCS0LDRiNCwINC30LDRj9Cy0LrQsCDQsdGD0LTQtdGCINGA0LDRgdGB0LzQvtGC0YDQtdC90LAg0LIg0YHQutC+0YDQvtC8INCy0YDQtdC80LXQvdC4ITwvYnI+0JzRiyDQvtCx0Y/Qt9Cw0YLQtdC70YzQvdC+INCy0LDQvCDQv9C10YDQtdC30LLQvtC90LjQvFwiO1xuICB9XG4gIHJldHVybiAkLm1hZ25pZmljUG9wdXAub3Blbih7XG4gICAgaXRlbXM6IHtcbiAgICAgIHNyYzogJChcIjxkaXYgY2xhc3M9J2Zvcm1fX3Jlc3BvbnNlJz5cIiArIG1lc3NhZ2UgKyBcIjwvZGl2PlwiKSxcbiAgICAgIHR5cGU6ICdpbmxpbmUnXG4gICAgfSxcbiAgICByZW1vdmFsRGVsYXk6IDUwMCxcbiAgICBtYWluQ2xhc3M6ICdtZnAtM2QtdW5mb2xkJyxcbiAgICBjYWxsYmFja3M6IHtcbiAgICAgIGJlZm9yZU9wZW46IGZ1bmN0aW9uKCkge31cbiAgICB9LFxuICAgIG1pZENsaWNrOiB0cnVlXG4gIH0pO1xufTtcblxuZG9jdW1lbnQub3BlbkZvcm0gPSBmdW5jdGlvbihzZWxlY3Rvcikge1xuICBpZiAoc2VsZWN0b3IgPT0gbnVsbCkge1xuICAgIHNlbGVjdG9yID0gXCIuZm9ybSBmb3JtOmVxKDEpXCI7XG4gIH1cbiAgcmV0dXJuICQubWFnbmlmaWNQb3B1cC5vcGVuKHtcbiAgICBpdGVtczoge1xuICAgICAgc3JjOiAkKHNlbGVjdG9yKSxcbiAgICAgIHR5cGU6ICdpbmxpbmUnXG4gICAgfSxcbiAgICByZW1vdmFsRGVsYXk6IDUwMCxcbiAgICBtYWluQ2xhc3M6ICdtZnAtem9vbS1pbiBtb2RhbCcsXG4gICAgY2FsbGJhY2tzOiB7XG4gICAgICBiZWZvcmVPcGVuOiBmdW5jdGlvbigpIHt9XG4gICAgfSxcbiAgICBtaWRDbGljazogdHJ1ZVxuICB9KTtcbn07XG4iLCIkKGZ1bmN0aW9uKCkge1xuICB2YXIgY291bnRlciwgc2VsZWN0b3JzO1xuICBzZWxlY3RvcnMgPSBbJy5mb3JtX19maWVsZCBpbnB1dFt0eXBlPVwidGV4dFwiXScsICcuZm9ybV9fZmllbGQgaW5wdXRbdHlwZT1cInRlbFwiXScsICcuZm9ybV9fZmllbGQgdGV4dGFyZWEnXTtcbiAgJChkb2N1bWVudCkub24oJ3JlYWR5IGZvY3VzIGJsdXInLCBzZWxlY3RvcnMuam9pbignLCAnKSwgZnVuY3Rpb24oZSkge1xuICAgIHZhciAkZWw7XG4gICAgJGVsID0gJCh0aGlzKS5wYXJlbnQoJ3NwYW4nKTtcbiAgICBpZiAoJGVsLmxlbmd0aCA+IDApIHtcbiAgICAgICRlbC50b2dnbGVDbGFzcygnZm9jdXNlZCcsICQodGhpcykuaXMoJzpmb2N1cycpKTtcbiAgICB9XG4gICAgcmV0dXJuICRlbC50b2dnbGVDbGFzcygnaGFzLXRleHQnLCAkKHRoaXMpLnZhbCgpLmxlbmd0aCA+IDApO1xuICB9KTtcbiAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5idXR0b24nLCBmdW5jdGlvbihlKSB7XG4gICAgcmV0dXJuICQodGhpcykuc2libGluZ3MoJ2lucHV0W3R5cGU9XCJzdWJtaXRcIl0nKS50cmlnZ2VyKCdjbGljaycpO1xuICB9KTtcbiAgY291bnRlciA9IDA7XG4gIHJldHVybiAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLmZvcm1fX3JpZ2h0IGlucHV0W3R5cGU9XCJzdWJtaXRcIl0nLCBmdW5jdGlvbihlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICQodGhpcykucGFyZW50KCkuc2libGluZ3MoJy53cGNmNy1yZXNwb25zZS1vdXRwdXQnKS5zbGlkZVVwKDQwMCk7XG4gICAgJCh0aGlzKS5zaWJsaW5ncygnLmFqYXgtbG9hZGVyJykuY3NzKHtcbiAgICAgIHZpc2liaWxpdHk6ICd2aXNpYmxlJ1xuICAgIH0pO1xuICAgIHJldHVybiB3aW5kb3cuc2V0VGltZW91dCgoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgY291bnRlcisrO1xuICAgICAgICBpZiAoY291bnRlciA8IDIpIHtcbiAgICAgICAgICAkKF90aGlzKS5wYXJlbnRzKCdmb3JtJykuZmluZCgnLmZvcm1fX2ZpZWxkOm50aC1sYXN0LWNoaWxkKG4rMikgaW5wdXQnKS5hZGRDbGFzcygnd3BjZjctbm90LXZhbGlkJyk7XG4gICAgICAgICAgJChfdGhpcykucGFyZW50KCkuc2libGluZ3MoJy53cGNmNy1yZXNwb25zZS1vdXRwdXQnKS5zbGlkZURvd24oNDAwKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAkKCcud3BjZjctbm90LXZhbGlkJykucmVtb3ZlQ2xhc3MoJ3dwY2Y3LW5vdC12YWxpZCcpO1xuICAgICAgICAgICQoX3RoaXMpLnBhcmVudCgpLnNpYmxpbmdzKCcud3BjZjctZ29vZCcpLnNsaWRlRG93big0MDApO1xuICAgICAgICAgIGRvY3VtZW50LmZvcm1zUmVzcG9uc2UoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gJChfdGhpcykuc2libGluZ3MoJy5hamF4LWxvYWRlcicpLmNzcyh7XG4gICAgICAgICAgdmlzaWJpbGl0eTogJ2hpZGRlbidcbiAgICAgICAgfSk7XG4gICAgICB9O1xuICAgIH0pKHRoaXMpLCA3MDAgKyBNYXRoLnJhbmRvbSgpICogKDIwMDAgLSA3MDApKTtcbiAgfSk7XG59KTtcblxuLy8gLS0tXG4vLyBnZW5lcmF0ZWQgYnkgY29mZmVlLXNjcmlwdCAxLjkuMlxuIiwidmFyIHNsaWNlID0gW10uc2xpY2U7XG5cbihmdW5jdGlvbigkLCB3aW5kb3cpIHtcbiAgdmFyIFJpcHBsZTtcbiAgUmlwcGxlID0gKGZ1bmN0aW9uKCkge1xuICAgIGZ1bmN0aW9uIFJpcHBsZShlbCwgb3B0aW9ucykge1xuICAgICAgdGhpcy4kZWwgPSAkKGVsKTtcbiAgICAgIHRoaXMuJGVsLm9uKCdjbGljaycsIChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oZSkge1xuICAgICAgICAgIHZhciB4LCB5O1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICBpZiAoJChfdGhpcykuZGF0YSgncHJlc3NlZCcpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICAgICQoX3RoaXMpLmRhdGEoJ3ByZXNzZWQnLCB0cnVlKTtcbiAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiAkKF90aGlzKS5kYXRhKCdwcmVzc2VkJywgZmFsc2UpO1xuICAgICAgICAgIH0sIDUwMCk7XG4gICAgICAgICAgX3RoaXMuJGluayA9IF90aGlzLiRlbC5jaGlsZHJlbignLmluaycpO1xuICAgICAgICAgIGlmIChfdGhpcy4kaW5rLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgX3RoaXMuJGVsLmFwcGVuZCgnPGRpdiBjbGFzcz1cImlua1wiPjwvZGl2PicpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBfdGhpcy4kaW5rID0gX3RoaXMuJGVsLmNoaWxkcmVuKCcuaW5rJyk7XG4gICAgICAgICAgaWYgKF90aGlzLiRpbmsubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIF90aGlzLiRpbmsucmVtb3ZlQ2xhc3MoXCJhbmltYXRlXCIpO1xuICAgICAgICAgIGlmICghX3RoaXMuJGluay5oZWlnaHQoKSAmJiAhX3RoaXMuJGluay53aWR0aCgpKSB7XG4gICAgICAgICAgICBfdGhpcy5kID0gTWF0aC5tYXgoX3RoaXMuJGVsLm91dGVyV2lkdGgoKSwgX3RoaXMuJGVsLm91dGVySGVpZ2h0KCkpO1xuICAgICAgICAgICAgX3RoaXMuJGluay5jc3Moe1xuICAgICAgICAgICAgICBoZWlnaHQ6IF90aGlzLmQsXG4gICAgICAgICAgICAgIHdpZHRoOiBfdGhpcy5kXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKF90aGlzLmQgPiAwKSB7XG4gICAgICAgICAgICB4ID0gZS5wYWdlWCAtIF90aGlzLiRlbC5vZmZzZXQoKS5sZWZ0IC0gX3RoaXMuZCAvIDI7XG4gICAgICAgICAgICB5ID0gZS5wYWdlWSAtIF90aGlzLiRlbC5vZmZzZXQoKS50b3AgLSBfdGhpcy5kIC8gMjtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKF90aGlzLiRpbmtbMF0pO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzLiRpbmsuY3NzKHtcbiAgICAgICAgICAgICAgdG9wOiB5ICsgJ3B4JyxcbiAgICAgICAgICAgICAgbGVmdDogeCArICdweCdcbiAgICAgICAgICAgIH0pLmFkZENsYXNzKFwiYW5pbWF0ZVwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9KSh0aGlzKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIFJpcHBsZTtcblxuICB9KSgpO1xuICByZXR1cm4gJC5mbi5leHRlbmQoe1xuICAgIHJpcHBsZTogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgYXJncywgb3B0aW9uO1xuICAgICAgb3B0aW9uID0gYXJndW1lbnRzWzBdLCBhcmdzID0gMiA8PSBhcmd1bWVudHMubGVuZ3RoID8gc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpIDogW107XG4gICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gbmV3IFJpcHBsZSh0aGlzKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG59KSh3aW5kb3cualF1ZXJ5LCB3aW5kb3cpO1xuXG4vLyAtLS1cbi8vIGdlbmVyYXRlZCBieSBjb2ZmZWUtc2NyaXB0IDEuOS4yXG4iLCIoZnVuY3Rpb24oKSB7XG4gIHZhciBzZXF1ZW5jZUVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNlcXVlbmNlMVwiKTtcbiAgaWYgKHNlcXVlbmNlRWxlbWVudCA9PSBudWxsKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIG9wdGlvbnMgPSB7XG4gICAgYW5pbWF0ZUNhbnZhczogZmFsc2UsXG4gICAga2V5TmF2aWdhdGlvbjogdHJ1ZSxcbiAgICBmYWRlU3RlcFdoZW5Ta2lwcGVkOiBmYWxzZSxcbiAgICByZXZlcnNlV2hlbk5hdmlnYXRpbmdCYWNrd2FyZHM6IHRydWUsXG4gICAgbmV4dEJ1dHRvbjogJyNzZXF1ZW5jZTEgLnNlcS1wcmV2JyxcbiAgICBwcmV2QnV0dG9uOiAnI3NlcXVlbmNlMSAuc2VxLW5leHQnLFxuICAgIHByZWxvYWRlcjogJyNzZXF1ZW5jZTEgLnNlcS1wcmVsb2FkZXInLFxuICAgIC8vIHJldmVyc2VUaW1pbmdGdW5jdGlvbldoZW5OYXZpZ2F0aW5nQmFja3dhcmRzOiB0cnVlLFxuICB9XG5cbiAgdmFyIG15U2VxdWVuY2UgPSBzZXF1ZW5jZShzZXF1ZW5jZUVsZW1lbnQsIG9wdGlvbnMpO1xufSkoKTtcbiJdfQ==
